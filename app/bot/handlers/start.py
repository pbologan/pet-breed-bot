from aiogram import Router, F
from aiogram.filters import Command, CommandStart
from aiogram.types import Message, CallbackQuery
from loguru import logger

from app.bot.keyboards import get_main_keyboard, get_help_inline_keyboard

router = Router()


@router.message(CommandStart())
async def cmd_start(message: Message):
    """Handle /start command"""
    logger.info(f"User {message.from_user.id} started the bot")

    welcome_text = (
        "üëã –ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä–æ–¥ –∂–∏–≤–æ—Ç–Ω—ã—Ö.\n\n"
        "üêï –û—Ç–ø—Ä–∞–≤—å –º–Ω–µ —Ñ–æ—Ç–æ —Å–æ–±–∞–∫–∏, –∫–æ—à–∫–∏ –∏–ª–∏ –ø—Ç–∏—Ü—ã, "
        "–∏ —è –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ—Ä–æ–¥—É –∏–ª–∏ –≤–∏–¥!\n\n"
        "üì∏ –ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é, –∏ —è —Å—Ä–∞–∑—É –µ—ë –æ–±—Ä–∞–±–æ—Ç–∞—é."
    )

    await message.answer(welcome_text, reply_markup=get_main_keyboard())


@router.message(Command("help"))
@router.message(F.text == "‚ÑπÔ∏è –ü–æ–º–æ—â—å")
async def cmd_help(message: Message):
    """Handle /help command"""
    help_text = (
        "‚ùì <b>–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º:</b>\n\n"
        "1Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –ø–∏—Ç–æ–º—Ü–∞\n"
        "2Ô∏è‚É£ –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥\n"
        "3Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä–æ–¥—ã\n\n"
        "üí° <b>–°–æ–≤–µ—Ç—ã –¥–ª—è –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:</b>\n"
        "‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–µ—Ç–∫–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏\n"
        "‚Ä¢ –ñ–∏–≤–æ—Ç–Ω–æ–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ö–æ—Ä–æ—à–æ –≤–∏–¥–Ω–æ\n"
        "‚Ä¢ –ò–∑–±–µ–≥–∞–π—Ç–µ —Å–ª–∏—à–∫–æ–º —Ç–µ–º–Ω—ã—Ö –∏–ª–∏ —Ä–∞–∑–º—ã—Ç—ã—Ö —Ñ–æ—Ç–æ\n\n"
        "ü§ñ –Ø –∏—Å–ø–æ–ª—å–∑—É—é –Ω–µ–π—Ä–æ—Å–µ—Ç—å –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø–æ—Ä–æ–¥!"
    )

    await message.answer(help_text, parse_mode="HTML", reply_markup=get_help_inline_keyboard())


@router.message(F.text == "üìä –û –ø—Ä–æ–µ–∫—Ç–µ")
async def cmd_about(message: Message):
    """Handle about button"""
    about_text = (
        "üìä <b>–û –ø—Ä–æ–µ–∫—Ç–µ Pet Breed Bot</b>\n\n"
        "–≠—Ç–æ—Ç –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è "
        "–¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä–æ–¥ –∂–∏–≤–æ—Ç–Ω—ã—Ö –ø–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º.\n\n"
        "üîß <b>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:</b>\n"
        "‚Ä¢ PyTorch - –≥–ª—É–±–æ–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ\n"
        "‚Ä¢ ResNet50 - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏\n"
        "‚Ä¢ aiogram - Telegram Bot API\n\n"
        "üéØ <b>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</b>\n"
        "‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä–æ–¥ —Å–æ–±–∞–∫\n"
        "‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä–æ–¥ –∫–æ—à–µ–∫\n"
        "‚Ä¢ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤–∏–¥–æ–≤ –ø—Ç–∏—Ü\n\n"
        "üìà –ú–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞ –Ω–∞ —Ç—ã—Å—è—á–∞—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —É–ª—É—á—à–∞–µ—Ç—Å—è!"
    )

    await message.answer(about_text, parse_mode="HTML")


@router.callback_query(F.data == "help_usage")
async def callback_help_usage(callback: CallbackQuery):
    """Handle help usage callback"""
    usage_text = (
        "üìñ <b>–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</b>\n\n"
        "1. –ù–∞–π–¥–∏—Ç–µ —á–µ—Ç–∫—É—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –ø–∏—Ç–æ–º—Ü–∞\n"
        "2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ—ë –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º\n"
        "3. –ë–æ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ–æ—Ç–æ (–æ–±—ã—á–Ω–æ 2-5 —Å–µ–∫—É–Ω–¥)\n"
        "4. –í—ã –ø–æ–ª—É—á–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Ä–æ–¥—ã –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏\n\n"
        "‚ö†Ô∏è –ï—Å–ª–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –Ω–∏–∑–∫–∞—è, –±–æ—Ç —Ç–∞–∫ –∏ —Å–∫–∞–∂–µ—Ç."
    )

    await callback.message.answer(usage_text, parse_mode="HTML")
    await callback.answer()


@router.callback_query(F.data == "help_breeds")
async def callback_help_breeds(callback: CallbackQuery):
    """Handle help breeds callback"""
    breeds_text = (
        "üêæ <b>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä–æ–¥—ã:</b>\n\n"
        "üêï <b>–°–æ–±–∞–∫–∏:</b>\n"
        "‚Ä¢ –ó–æ–ª–æ—Ç–∏—Å—Ç—ã–π —Ä–µ—Ç—Ä–∏–≤–µ—Ä\n"
        "‚Ä¢ –õ–∞–±—Ä–∞–¥–æ—Ä —Ä–µ—Ç—Ä–∏–≤–µ—Ä\n"
        "‚Ä¢ –ù–µ–º–µ—Ü–∫–∞—è –æ–≤—á–∞—Ä–∫–∞\n"
        "‚Ä¢ –ë–∏–≥–ª—å\n"
        "‚Ä¢ –ë—É–ª—å–¥–æ–≥\n"
        "–∏ –¥—Ä—É–≥–∏–µ...\n\n"
        "üê± <b>–ö–æ—à–∫–∏:</b>\n"
        "‚Ä¢ –°–∏–∞–º—Å–∫–∞—è –∫–æ—à–∫–∞\n"
        "‚Ä¢ –ü–µ—Ä—Å–∏–¥—Å–∫–∞—è –∫–æ—à–∫–∞\n"
        "‚Ä¢ –ú–µ–π–Ω-–∫—É–Ω\n"
        "‚Ä¢ –ë—Ä–∏—Ç–∞–Ω—Å–∫–∞—è –∫–æ—Ä–æ—Ç–∫–æ—à–µ—Ä—Å—Ç–Ω–∞—è\n"
        "–∏ –¥—Ä—É–≥–∏–µ...\n\n"
        "üê¶ <b>–ü—Ç–∏—Ü—ã:</b>\n"
        "‚Ä¢ –í–æ—Ä–æ–±–µ–π\n"
        "‚Ä¢ –ì–æ–ª—É–±—å\n"
        "‚Ä¢ –ü–æ–ø—É–≥–∞–π\n"
        "–∏ –¥—Ä—É–≥–∏–µ..."
    )

    await callback.message.answer(breeds_text, parse_mode="HTML")
    await callback.answer()
